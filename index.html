<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Y7Maker YouTube Downloader - Hookrest API</title>
  <link id="icon" rel="icon" href="https://image.pollinations.ai/prompt/Buat%20gambar%20youtube%20download%20yaitu%20Y7%20dengan%20desain%203d%2C%20warna%20putih%20merah%20domainan%20merah%20seperti%20logo%20play%20tapi%20lebih%20rapih?seed=1756394813856290123&enhance=true&nologo=true&model=flux" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap');

    :root {
      --primary: #e91e63;
      --primary-light: #f8bbd0;
      --secondary: #2196f3;
      --dark-bg: #0d1117;
      --dark-card: #161b22;
      --dark-text: #e6edf3;
      --light-bg: #ffffff;
      --light-card: #f9f9f9;
      --light-text: #333333;
      --accent-pink: #ff4081;
      --accent-blue: #03a9f4;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }

    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
    }

    body {
      font-family: 'Poppins', 'Noto Sans JP', sans-serif;
      background: var(--dark-bg);
      color: var(--dark-text);
      transition: background 0.4s, color 0.4s;
      overflow-x: hidden;
      line-height: 1.6;
    }

    body.light-mode {
      background: var(--light-bg);
      color: var(--light-text);
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      text-align: center;
      padding: 30px 0;
    }

    .logo {
      font-size: 2.8rem;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 10px;
      letter-spacing: 1px;
    }

    .tagline {
      font-size: 1.1rem;
      color: var(--dark-text);
      margin-bottom: 20px;
      opacity: 0.9;
    }

    body.light-mode .tagline {
      color: var(--light-text);
    }

    .owner {
      display: inline-block;
      background: rgba(233, 30, 99, 0.1);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      color: var(--primary);
      margin-bottom: 30px;
    }

    .card {
      background: var(--dark-card);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: var(--shadow);
      transition: transform 0.3s, background 0.4s;
    }

    body.light-mode .card {
      background: var(--light-card);
    }

    .card:hover {
      transform: translateY(-5px);
    }

    h1 {
      font-size: 2.2rem;
      margin-bottom: 15px;
      color: var(--primary);
      text-align: center;
    }

    h2 {
      font-size: 1.6rem;
      margin-bottom: 20px;
      color: var(--secondary);
    }

    p {
      margin-bottom: 20px;
      font-size: 1.05rem;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: #d81b60;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: var(--secondary);
      color: white;
    }

    .btn-secondary:hover {
      background: #0b7dda;
      transform: translateY(-2px);
    }

    .btn-toggle {
      background: var(--dark-card);
      color: var(--dark-text);
      border: 2px solid var(--primary);
    }

    body.light-mode .btn-toggle {
      background: var(--light-card);
      color: var(--light-text);
    }

    .btn-toggle:hover {
      background: var(--primary);
      color: white;
    }

    form {
      margin-bottom: 30px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--dark-text);
    }

    body.light-mode label {
      color: var(--light-text);
    }

    input, select {
      width: 100%;
      padding: 14px 16px;
      border-radius: 10px;
      border: 2px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.07);
      color: var(--dark-text);
      font-size: 1rem;
      transition: border 0.3s;
    }

    body.light-mode input, 
    body.light-mode select {
      border: 2px solid rgba(0, 0, 0, 0.1);
      background: rgba(0, 0, 0, 0.03);
      color: var(--light-text);
    }

    input:focus, select:focus {
      outline: none;
      border-color: var(--primary);
    }

    .result {
      display: none;
      animation: fadeIn 0.6s ease forwards;
      text-align: center;
      padding: 25px;
      border-radius: 16px;
      background: rgba(33, 150, 243, 0.1);
      margin-top: 30px;
    }

    .download-btn {
      display: inline-block;
      margin-top: 20px;
      padding: 14px 28px;
      background: var(--primary);
      color: white;
      border-radius: 10px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s;
    }

    .download-btn:hover {
      background: #d81b60;
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(233, 30, 99, 0.3);
    }

    .tutorial {
      margin-top: 50px;
    }

    .steps {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }

    .step {
      background: var(--dark-card);
      padding: 25px;
      border-radius: 16px;
      text-align: center;
      transition: transform 0.3s, background 0.4s;
    }

    body.light-mode .step {
      background: var(--light-card);
    }

    .step:hover {
      transform: translateY(-5px);
    }

    .step-number {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      font-size: 1.5rem;
      font-weight: 600;
      margin: 0 auto 20px;
    }

    footer {
      text-align: center;
      padding: 40px 0 20px;
      margin-top: 60px;
      color: var(--dark-text);
      opacity: 0.8;
      font-size: 0.9rem;
    }

    body.light-mode footer {
      color: var(--light-text);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Responsive styles */
    @media (max-width: 768px) {
      .logo {
        font-size: 2.2rem;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      h2 {
        font-size: 1.4rem;
      }
      
      .card {
        padding: 20px;
      }
      
      .btn {
        padding: 10px 20px;
        font-size: 0.95rem;
      }
      
      .steps {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <canvas id="particles"></canvas>
  
  <div class="container">
    <header>
      <div class="logo">Y7Maker</div>
      <div class="tagline" id="tagline">YouTube Downloader by Hookrest API</div>
      <div class="owner">Owner: Danz-dev</div>
    </header>
    
    <div class="card">
      <h1 id="title">YouTube Downloader</h1>
      <p id="desc">Masukkan URL YouTube dan pilih format untuk mengunduh audio atau video.</p>
      
      <div class="controls">
        <button class="btn btn-toggle" id="langToggle">
          <i class="fas fa-language"></i> <span id="langText">日本語</span>
        </button>
        <button class="btn btn-toggle" id="modeToggle">
          <i class="fas fa-moon" id="modeIcon"></i> <span id="modeText">Light Mode</span>
        </button>
      </div>
      
      <form id="downloadForm">
        <div class="form-group">
          <label for="ytUrl" id="urlLabel">URL YouTube</label>
          <input type="text" id="ytUrl" placeholder="Masukkan URL YouTube..." required>
        </div>
        
        <div class="form-group">
          <label for="format" id="formatLabel">Format</label>
          <select id="format">
            <option value="mp3">Audio (MP3)</option>
            <option value="mp4">Video (MP4)</option>
          </select>
        </div>
        
        <button type="submit" class="btn btn-primary" style="width: 100%">
          <i class="fas fa-download"></i> <span id="downloadText">Download</span>
        </button>
      </form>
      
      <div class="result" id="resultBox">
        <h2 id="resTitle"></h2>
        <p><span id="resDuration"></span></p>
        <a id="resDownload" class="download-btn" target="_blank">
          <i class="fas fa-download"></i> <span id="downloadBtnText">Download</span>
        </a>
      </div>
    </div>
    
    <div class="tutorial">
      <h2 id="tutorialTitle">Cara Menggunakan</h2>
      <div class="steps">
        <div class="step">
          <div class="step-number">1</div>
          <h3 id="step1Title">Salin URL</h3>
          <p id="step1Desc">Salin URL video YouTube yang ingin Anda download</p>
        </div>
        <div class="step">
          <div class="step-number">2</div>
          <h3 id="step2Title">Pilih Format</h3>
          <p id="step2Desc">Pilih format MP3 untuk audio atau MP4 untuk video</p>
        </div>
        <div class="step">
          <div class="step-number">3</div>
          <h3 id="step3Title">Download</h3>
          <p id="step3Desc">Klik tombol download dan tunggu prosesnya selesai</p>
        </div>
      </div>
    </div>
    
    <footer>
      <p>Y7Maker YouTube Downloader &copy; 2025 - Powered by Hookrest-team</p>
    </footer>
  </div>

  <script>
    // DOM Elements
    const form = document.getElementById("downloadForm");
    const ytUrl = document.getElementById("ytUrl");
    const format = document.getElementById("format");
    const resultBox = document.getElementById("resultBox");
    const resTitle = document.getElementById("resTitle");
    const resDuration = document.getElementById("resDuration");
    const resDownload = document.getElementById("resDownload");

    const langToggle = document.getElementById("langToggle");
    const langText = document.getElementById("langText");
    const modeToggle = document.getElementById("modeToggle");
    const modeIcon = document.getElementById("modeIcon");
    const modeText = document.getElementById("modeText");
    const title = document.getElementById("title");
    const desc = document.getElementById("desc");
    const tagline = document.getElementById("tagline");
    const urlLabel = document.getElementById("urlLabel");
    const formatLabel = document.getElementById("formatLabel");
    const downloadText = document.getElementById("downloadText");
    const downloadBtnText = document.getElementById("downloadBtnText");
    const tutorialTitle = document.getElementById("tutorialTitle");
    const step1Title = document.getElementById("step1Title");
    const step1Desc = document.getElementById("step1Desc");
    const step2Title = document.getElementById("step2Title");
    const step2Desc = document.getElementById("step2Desc");
    const step3Title = document.getElementById("step3Title");
    const step3Desc = document.getElementById("step3Desc");

    let lang = "id";

    // Language content
    const content = {
      id: {
        title: "YouTube Downloader",
        tagline: "YouTube Downloader by Hookrest API",
        desc: "Masukkan URL YouTube dan pilih format untuk mengunduh audio atau video.",
        urlLabel: "URL YouTube",
        formatLabel: "Format",
        downloadText: "Download",
        downloadBtnText: "Download",
        tutorialTitle: "Cara Menggunakan",
        step1Title: "Salin URL",
        step1Desc: "Salin URL video YouTube yang ingin Anda download",
        step2Title: "Pilih Format",
        step2Desc: "Pilih format MP3 untuk audio atau MP4 untuk video",
        step3Title: "Download",
        step3Desc: "Klik tombol download dan tunggu prosesnya selesai",
        langText: "日本語",
        modeText: "Light Mode"
      },
      jp: {
        title: "YouTube ダウンローダー",
        tagline: "Hookrest APIによるYouTubeダウンローダー",
        desc: "YouTube の URL を入力して、形式を選択し、音声または動画をダウンロードしてください。",
        urlLabel: "YouTubeのURL",
        formatLabel: "フォーマット",
        downloadText: "ダウンロード",
        downloadBtnText: "ダウンロード",
        tutorialTitle: "使い方",
        step1Title: "URLをコピー",
        step1Desc: "ダウンロードしたいYouTube動画のURLをコピーしてください",
        step2Title: "形式を選択",
        step2Desc: "音声の場合はMP3、動画の場合はMP4を選択してください",
        step3Title: "ダウンロード",
        step3Desc: "ダウンロードボタンをクリックして処理が完了するまでお待ちください",
        langText: "Indonesia",
        modeText: "ライトモード"
      }
    };

    // Switch Bahasa
    langToggle.addEventListener("click", () => {
      lang = lang === "id" ? "jp" : "id";
      updateContent();
    });

    // Update content based on language
    function updateContent() {
      const currentContent = content[lang];
      title.textContent = currentContent.title;
      tagline.textContent = currentContent.tagline;
      desc.textContent = currentContent.desc;
      urlLabel.textContent = currentContent.urlLabel;
      formatLabel.textContent = currentContent.formatLabel;
      downloadText.textContent = currentContent.downloadText;
      downloadBtnText.textContent = currentContent.downloadBtnText;
      tutorialTitle.textContent = currentContent.tutorialTitle;
      step1Title.textContent = currentContent.step1Title;
      step1Desc.textContent = currentContent.step1Desc;
      step2Title.textContent = currentContent.step2Title;
      step2Desc.textContent = currentContent.step2Desc;
      step3Title.textContent = currentContent.step3Title;
      step3Desc.textContent = currentContent.step3Desc;
      langText.textContent = currentContent.langText;
      modeText.textContent = currentContent.modeText;
    }

    // Switch Dark/Light mode
    modeToggle.addEventListener("click", () => {
      document.body.classList.toggle("light-mode");
      if (document.body.classList.contains("light-mode")) {
        modeIcon.classList.remove("fa-moon");
        modeIcon.classList.add("fa-sun");
        modeText.textContent = lang === "id" ? "Dark Mode" : "ダークモード";
      } else {
        modeIcon.classList.remove("fa-sun");
        modeIcon.classList.add("fa-moon");
        modeText.textContent = lang === "id" ? "Light Mode" : "ライトモード";
      }
    });

    // Handle Submit
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      let url = ytUrl.value.trim();
      let type = format.value;

      if (!url) return;

      // Validasi dasar: pastikan URL mengandung youtube.com atau youtu.be
      if (!url.includes('youtube.com') && !url.includes('youtu.be')) {
        resTitle.textContent = lang === "id" ? "URL harus berisi 'youtube.com' atau 'youtu.be'!" : "URLには'youtube.com'または'youtu.be'を含める必要があります！";
        resDuration.textContent = "";
        resDownload.style.display = "none";
        resultBox.style.display = "block";
        return;
      }

      // Tampilkan loading state
      const submitBtn = form.querySelector('button[type="submit"]');
      const originalText = submitBtn.innerHTML;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Memproses...';
      submitBtn.disabled = true;
      resultBox.style.display = "none";

      // Gunakan proxy CORS
      const proxyUrl = 'https://api.allorigins.win/raw?url=';
      let apiUrl;
      if (type === "mp3") {
        apiUrl = `https://hookrest.my.id/dowload/ytmp3?url=${encodeURIComponent(url)}`;
      } else {
        apiUrl = `https://hookrest.my.id/dowload/ytmp4?url=${encodeURIComponent(url)}`;
      }

      try {
        const res = await fetch(proxyUrl + encodeURIComponent(apiUrl));
        
        if (!res.ok) {
          throw new Error(`HTTP error! status: ${res.status}`);
        }
        
        const data = await res.json();

        if (data.status) {
          if (type === "mp3") {
            resTitle.textContent = data.meta.title || "Audio YouTube";
            resDuration.textContent = `Durasi: ${data.meta.duration ? data.meta.duration.toFixed(2) : 'N/A'} detik | Ukuran: ${data.meta.size || 'N/A'}`;
            resDownload.href = data.download.url;
            resDownload.textContent = `Download MP3`;
          } else {
            resTitle.textContent = data.download.title || "Video YouTube";
            resDuration.textContent = `Kualitas: ${data.download.quality || 'N/A'} | MIME: ${data.download.mimeType ? data.download.mimeType.split(';')[0] : 'video/mp4'}`;
            resDownload.href = data.download.url;
            resDownload.textContent = `Download MP4`;
          }
          resultBox.style.display = "block";
        } else {
          resTitle.textContent = lang === "id" ? 
            `Error: ${data.message || 'Gagal memproses permintaan'}` : 
            `エラー: ${data.message || 'リクエストの処理に失敗しました'}`;
          resDuration.textContent = "";
          resDownload.style.display = "none";
          resultBox.style.display = "block";
        }
      } catch (err) {
        console.error('Error detail:', err);
        resTitle.textContent = lang === "id" ? 
          "Kesalahan Koneksi!" : 
          "接続エラー！";
        resDuration.textContent = lang === "id" ? 
          "Periksa koneksi internet atau coba lagi nanti" : 
          "インターネット接続を確認するか、後でもう一度お試しください";
        resDownload.style.display = "none";
        resultBox.style.display = "block";
      } finally {
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
      }
    });

    // Particle Background
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    let particlesArray = [];
    let animationId;

    function setupCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    class Particle {
      constructor(x, y, dx, dy, size, color) {
        this.x = x;
        this.y = y;
        this.dx = dx;
        this.dy = dy;
        this.size = size;
        this.color = color;
      }

      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
        ctx.fillStyle = this.color;
        ctx.fill();
      }

      update() {
        if (this.x > canvas.width || this.x < 0) this.dx = -this.dx;
        if (this.y > canvas.height || this.y < 0) this.dy = -this.dy;
        this.x += this.dx;
        this.y += this.dy;
        this.draw();
      }
    }

    function init() {
      particlesArray = [];
      let numberOfParticles = Math.min(
        (canvas.height * canvas.width) / 15000, 
        window.innerWidth < 768 ? 30 : 100
      );
      
      for (let i = 0; i < numberOfParticles; i++) {
        let size = window.innerWidth < 768 ? 1.5 : 2;
        let x = Math.random() * (innerWidth - size * 2);
        let y = Math.random() * (innerHeight - size * 2);
        let dx = (Math.random() - 0.5) * (window.innerWidth < 768 ? 0.8 : 1);
        let dy = (Math.random() - 0.5) * (window.innerWidth < 768 ? 0.8 : 1);
        let color = document.body.classList.contains('light-mode') 
          ? 'rgba(233, 30, 99, 0.6)' 
          : 'rgba(33, 150, 243, 0.6)';
        particlesArray.push(new Particle(x, y, dx, dy, size, color));
      }
    }

    function connect() {
      for (let a = 0; a < particlesArray.length; a++) {
        for (let b = a; b < particlesArray.length; b++) {
          let distance = ((particlesArray[a].x - particlesArray[b].x) ** 2) 
                       + ((particlesArray[a].y - particlesArray[b].y) ** 2);
          if (distance < (canvas.width/7) * (canvas.height/7)) {
            ctx.strokeStyle = document.body.classList.contains('light-mode') 
              ? 'rgba(233, 30, 99, 0.2)' 
              : 'rgba(33, 150, 243, 0.2)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
            ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
            ctx.stroke();
          }
        }
      }
    }

    function animate() {
      ctx.clearRect(0, 0, innerWidth, innerHeight);
      for (let i = 0; i < particlesArray.length; i++) {
        particlesArray[i].update();
      }
      connect();
      animationId = requestAnimationFrame(animate);
    }

    function startAnimation() {
      if (animationId) {
        cancelAnimationFrame(animationId);
      }
      setupCanvas();
      init();
      animate();
    }

    setupCanvas();
    init();
    animate();

    window.addEventListener('resize', function() {
      startAnimation();
    });

    document.addEventListener('visibilitychange', function() {
      if (document.hidden) {
        cancelAnimationFrame(animationId);
      } else {
        animate();
      }
    });
  </script>
</body>
</html>
